# 🚊 11장 시스템

## 시스템 제작과 시스템 사용을 분리하라

- 제작 과 사용은 다르다.
- 시작 단계는 관심사, 관심사 분리는 중요한 설계 기법
- 런타임 로직에 객체 생성 로직이 섞이게 되면 SRP(Single Responsibility Principle)을 깬다.

## Main 분리

- 생성과 관련된 코드는 모두 Main 혹은 main이 호출하는 모듈로 이동
- 나머지 시스템은 모든 객체가 생성되었고 모든 의존성이 연결된다 가정
- 이렇게 되면 애플리케이션은 객체가 생성되는 과정을 모르게 된다.

## Abstract Factory 패턴

- Abstract Factory 패턴은 객체 생성을 추상화하는 디자인 패턴 중 하나
- 클라이언트가 추상적 인터페이스를 통해 객체 생성 유도 → 복잡도 낮춤
- 일관된 방식으로 객체 생성
- 유연성, 확장성 제공
- 클라이언트 코드에서 구현을 생각하지 않고 객체를 생성

## 의존성 주입(Dependency Injection)

- 사용과 제작을 분리
- 제어 역전(IoC 기법을 의존성 관리에 적용한 메커니즘) → 제작이 분리되어 SRP를 만족
- 스프링 프레임워크는 자바 DI 컨테이너를 제공
- DI 컨테이너 → 팩토리, 프록시 생성 방법 사용

## 확장

- '처음부터 올바르게' 시스템을 만들 수 있다는 믿음은 미신이다.
- 오늘 주어진 사용자 스토리에 맞춰 시스템을 구현해야 한다. 내일은 새로운 스토리에 맞춰 시스템을 조정하고 확장하면 된다.
이것이 에자일 방식의 핵심이다.
- 깨끗한 코드는 코드 수준에서 시스템을 조정하고 확장하기 쉽게 만든다.


## 횡단(cross-cutting)관심사

- 모든 객체가 전반적으로 동일한 방식을 이용하게 만들어야 한다.
- AOP는 횡단 관심사에 대처해 모듈성을 확보하는 일반적인 방법
- AOP에서 관점은 특정 지점에서 동작하는 방식이 일관성 있게 바꿔야 한다.

## 자바 프록시

- 단순한 상황 적합
- 대리자 패턴(Proxy Pattern)을 구현
- 다른 객체에 대한 대리 역할 수행
- 코드의 재사용성, 유지보수성 및 확장성을 향상
- 원본 객체에 접근하는 클라이언트 요청을 가로채서 추가적인 작업 진행
    - 원격 서비스에 대한 접근 제어
    - 보안 제어
    - 성능 최적화
    - 로깅 및 오류 처리

## 순수 자바 AOP 프레임워크

- POJO(Plain Old Java Object)
    - 프레임워크나 라이브러리에 종속되지 않는다.
    - 기본적인 자바 클래스
    - 일반적인 자바 규약을 따름
    - 가독성 향상 → 테스트 및 유지보수 쉬움
- 데코레이터
    - 소프트웨어 디자인 패턴
    - 객체에 동적으로 기능 추가
    - 상속 x → 객체 감싸 기능 추가
    - 객체 구조 변경 x → 유연한 확장
    - 개방-폐쇄 원칙(OCP) 준수
        - 기능 추가 및 변경시 기존 객체 수정 x
    - 단일 책임 원칙 준수
        - 특정 기능에 대해서만 책임을 가짐
        

## 테스트 주도 시스템 아키텍처 구축

- 건축가는 Big Design Up Front 추구
    - 변경이 쉽지 않기 때문에 추구
- 소프트웨어도 나름 형체가 있지만 관점을 잘 분리한다면 극적인 변화 가능

## 시스템은 도메인 특화 언어가 필요하다.

- DSL(Domain-Specific Language) 간단한 스크립트 언어나 표준 언어로 구현한 API
    - 도메인 전문가가 작성한 코드 처럼 읽힘
