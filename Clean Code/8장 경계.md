# 😇 8장 경계

## 외부 코드 사용하기

개선 전 코드

```jsx
Map<String, Sensor> sensors = new HashMap<Sensor>();
Sensons = sensors.get(sensorId);
```

위 코드의 문제점

- 프로그램에서 Map<String, Sensor>가 사용자에게 필요하지 않은 기능까지 제공한다
- 프로그램에서 Map<String, Sensor> 인스턴스를 여기저기로 넘긴다면, Map 인터페이스가 변할 경우, 수정할 코드가 상당히 많아진다.

개선 후 코드

```jsx
public class Sensors {
	private Map sensors = new HashMap();

	public Sensor getById(String id) {
		return (Sensor) sensors.get(id);
	}
```

개선 된 점

- 경계 인터페이스인 Map을 Sensors안으로 숨긴다. 따라서 Map 인터페이스가 변하더라도 나머지 프로그램에는 영향을 미치지 않는다.
- Sensors 클래스는 프로그램에 필요한 인터페이스만 제공한다.

## 경계 살피고 익히기

외부 API를 사용할 때 코트를 테스트해보는 것이 바람직하다.

- 간단한 테스트 케이스를 작성해 외부 API를 학습한다. 짐 뉴커크는 이를 학습 테스트라 부른다.
- 통제된 환경에서 API를 제대로 이해하는지를 확인한다.

## 학습 테스트는 공짜 이상이다.

- 학습 테스트는 무료다.
- 학습 테스트는 이해도를 높혀준다.
- 패키지 새 버전이 나올 때마다 새로운 위험이 생긴다. 새 버전이 우리 코드와 호환되지 않으면 학습 테스트가 이 사실을 곧바로 밝혀댄다.

## 깨끗한 경계

경계에 위치하는 코드는 깔끔히 분리한다. 또한 기대치를 정의하는 테스트 케이스도 작성한다. 이쪽 코드에서 외부 패키지를 세세하게 알아야 할 필요가 없다. 통제가 불가능한 외부 패키지에 의존하는 대신 통제가 가능한 우리 코드에 의존하는 편이 훨씬 좋다. 자칫하면 오히려 외부 코드에 휘둘리고 만다.
외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리하자
